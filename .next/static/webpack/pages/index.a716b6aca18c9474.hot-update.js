"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/index",{

/***/ "./lib/firestore.ts":
/*!**************************!*\
  !*** ./lib/firestore.ts ***!
  \**************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAllTeams: function() { return /* binding */ getAllTeams; },\n/* harmony export */   subscribeToTeams: function() { return /* binding */ subscribeToTeams; },\n/* harmony export */   updatePhysicalScore: function() { return /* binding */ updatePhysicalScore; }\n/* harmony export */ });\n/* harmony import */ var firebase_database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/database */ \"./node_modules/firebase/database/dist/esm/index.esm.js\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./firebase */ \"./lib/firebase.ts\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/auth */ \"./node_modules/firebase/auth/dist/esm/index.esm.js\");\n// Firebase Realtime Database operations for AR Treasure Hunt Volunteer Page\n\n\n\n/**\n * Ensure user is authenticated before database operations\n */ async function ensureAuth() {\n    if (!_firebase__WEBPACK_IMPORTED_MODULE_1__.auth.currentUser) {\n        try {\n            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.signInAnonymously)(_firebase__WEBPACK_IMPORTED_MODULE_1__.auth);\n        } catch (error) {\n            console.error(\"Failed to authenticate anonymously:\", error);\n            throw new Error(\"Authentication required\");\n        }\n    }\n}\n/**\n * Get session data for a team\n */ async function getTeamSession(uid) {\n    try {\n        // Try lowercase 'session' first (matches main code)\n        const sessionRef = (0,firebase_database__WEBPACK_IMPORTED_MODULE_0__.ref)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, \"\".concat(uid, \"/session\"));\n        const snapshot = await (0,firebase_database__WEBPACK_IMPORTED_MODULE_0__.get)(sessionRef);\n        if (snapshot.exists()) {\n            return snapshot.val();\n        }\n        // Fallback to uppercase 'Session' for backwards compatibility\n        const sessionRefUpper = (0,firebase_database__WEBPACK_IMPORTED_MODULE_0__.ref)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, \"\".concat(uid, \"/Session\"));\n        const snapshotUpper = await (0,firebase_database__WEBPACK_IMPORTED_MODULE_0__.get)(sessionRefUpper);\n        if (snapshotUpper.exists()) {\n            return snapshotUpper.val();\n        }\n        return null;\n    } catch (error) {\n        console.error(\"Error getting team session:\", error);\n        return null;\n    }\n}\n/**\n * Get all teams for the volunteer interface\n */ async function getAllTeams() {\n    try {\n        await ensureAuth();\n        const rootRef = (0,firebase_database__WEBPACK_IMPORTED_MODULE_0__.ref)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db);\n        const snapshot = await (0,firebase_database__WEBPACK_IMPORTED_MODULE_0__.get)(rootRef);\n        if (!snapshot.exists()) {\n            return [];\n        }\n        const allData = snapshot.val();\n        const teamsArray = [];\n        console.log(\"Raw Firebase data:\", allData);\n        // Filter only valid team nodes (those with teamName property)\n        for(const uid in allData){\n            if (allData[uid] && typeof allData[uid] === \"object\" && allData[uid].teamName) {\n                const rawTeamData = allData[uid];\n                console.log(\"Processing team \".concat(uid, \":\"), rawTeamData);\n                // Create team data without the Session node first\n                const teamData = {\n                    ...rawTeamData\n                };\n                teamData.uid = uid; // Ensure UID is set\n                // Ensure physicalScore and comment are included\n                teamData.physicalScore = teamData.physicalScore || 0;\n                teamData.physicalScoreComment = teamData.physicalScoreComment || \"\";\n                // Check if session data exists as a nested object (lowercase 's')\n                if (rawTeamData.session && typeof rawTeamData.session === \"object\") {\n                    console.log(\"Found session data for team \".concat(uid, \":\"), rawTeamData.session);\n                    teamData.session = rawTeamData.session;\n                } else {\n                    console.log(\"No session data found for team \".concat(uid, \", checking for alternative session data...\"));\n                    console.log(\"Available keys in team data:\", Object.keys(rawTeamData));\n                    // Default session data for teams that haven't started\n                    teamData.session = {\n                        cluesCompleted: 0,\n                        currentClueNumber: 0,\n                        started: false,\n                        status: \"not_started\"\n                    };\n                }\n                console.log(\"Final processed team data for \".concat(uid, \":\"), teamData);\n                teamsArray.push(teamData);\n            } else {\n                console.log(\"Skipping invalid team data for \".concat(uid, \":\"), allData[uid]);\n            }\n        }\n        // Sort by team number (ascending)\n        teamsArray.sort((a, b)=>a.teamNumber - b.teamNumber);\n        return teamsArray;\n    } catch (error) {\n        console.error(\"Error getting teams:\", error);\n        return [];\n    }\n}\n/**\n * Update a team's physical score with comment\n */ async function updatePhysicalScore(uid, physicalScore, comment) {\n    try {\n        await ensureAuth();\n        const teamRef = (0,firebase_database__WEBPACK_IMPORTED_MODULE_0__.ref)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, uid);\n        const snapshot = await (0,firebase_database__WEBPACK_IMPORTED_MODULE_0__.get)(teamRef);\n        if (!snapshot.exists()) {\n            throw new Error(\"Team not found with the provided UID\");\n        }\n        // Update the physical score and comment\n        const updateData = {\n            physicalScore: physicalScore\n        };\n        if (comment !== undefined) {\n            updateData.physicalScoreComment = comment;\n        }\n        await (0,firebase_database__WEBPACK_IMPORTED_MODULE_0__.update)(teamRef, updateData);\n        return true;\n    } catch (error) {\n        console.error(\"Error updating physical score:\", error);\n        throw error;\n    }\n}\n/**\n * Set up real-time listener for team updates\n */ function subscribeToTeams(callback) {\n    try {\n        const rootRef = (0,firebase_database__WEBPACK_IMPORTED_MODULE_0__.ref)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db);\n        console.log(\"Setting up Realtime Database listener for teams...\");\n        const unsubscribe = (0,firebase_database__WEBPACK_IMPORTED_MODULE_0__.onValue)(rootRef, (snapshot)=>{\n            console.log(\"Realtime Database snapshot received\");\n            if (!snapshot.exists()) {\n                console.log(\"No data found\");\n                callback([]);\n                return;\n            }\n            const allData = snapshot.val();\n            const teamsArray = [];\n            // Filter only valid team nodes (those with teamName property)\n            for(const uid in allData){\n                if (allData[uid] && typeof allData[uid] === \"object\" && allData[uid].teamName) {\n                    const rawTeamData = allData[uid];\n                    console.log(\"Real-time: Processing team \".concat(uid, \":\"), rawTeamData);\n                    // Create team data without the Session node first\n                    const teamData = {\n                        ...rawTeamData\n                    };\n                    teamData.uid = uid; // Ensure UID is set\n                    // Ensure physicalScore and comment are included\n                    teamData.physicalScore = teamData.physicalScore || 0;\n                    teamData.physicalScoreComment = teamData.physicalScoreComment || \"\";\n                    // Handle session data from the snapshot (lowercase 's')\n                    if (rawTeamData.session && typeof rawTeamData.session === \"object\") {\n                        console.log(\"Real-time: Found session data for team \".concat(uid, \":\"), rawTeamData.session);\n                        teamData.session = rawTeamData.session;\n                    } else {\n                        console.log(\"Real-time: No session data found for team \".concat(uid));\n                        console.log(\"Real-time: Available keys in team data:\", Object.keys(rawTeamData));\n                        // Default session data for teams that haven't started\n                        teamData.session = {\n                            cluesCompleted: 0,\n                            currentClueNumber: 0,\n                            started: false,\n                            status: \"not_started\"\n                        };\n                    }\n                    console.log(\"Real-time: Final processed team data for \".concat(uid, \":\"), teamData);\n                    teamsArray.push(teamData);\n                } else {\n                    console.log(\"Real-time: Skipping invalid team data for \".concat(uid, \":\"), allData[uid]);\n                }\n            }\n            console.log(\"Teams data:\", teamsArray);\n            // Sort by team number (ascending)\n            teamsArray.sort((a, b)=>a.teamNumber - b.teamNumber);\n            callback(teamsArray);\n        }, (error)=>{\n            console.error(\"Realtime Database listener error:\", error);\n            callback([]);\n        });\n        // Return unsubscribe function\n        return ()=>{\n            console.log(\"Unsubscribing from Realtime Database listener\");\n            (0,firebase_database__WEBPACK_IMPORTED_MODULE_0__.off)(rootRef, \"value\", unsubscribe);\n        };\n    } catch (error) {\n        console.error(\"Error setting up Realtime Database listener:\", error);\n        return ()=>{};\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZmlyZXN0b3JlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLDRFQUE0RTtBQVFqRDtBQUNXO0FBQ1k7QUEwQ2xEOztDQUVDLEdBQ0QsZUFBZVE7SUFDYixJQUFJLENBQUNGLDJDQUFJQSxDQUFDRyxXQUFXLEVBQUU7UUFDckIsSUFBSTtZQUNGLE1BQU1GLGdFQUFpQkEsQ0FBQ0QsMkNBQUlBO1FBQzlCLEVBQUUsT0FBT0ksT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsdUNBQXVDQTtZQUNyRCxNQUFNLElBQUlFLE1BQU07UUFDbEI7SUFDRjtBQUNGO0FBRUE7O0NBRUMsR0FDRCxlQUFlQyxlQUFlQyxHQUFXO0lBQ3ZDLElBQUk7UUFDRixvREFBb0Q7UUFDcEQsTUFBTUMsYUFBYWYsc0RBQUdBLENBQUNLLHlDQUFFQSxFQUFFLEdBQU8sT0FBSlMsS0FBSTtRQUNsQyxNQUFNRSxXQUFXLE1BQU1mLHNEQUFHQSxDQUFDYztRQUUzQixJQUFJQyxTQUFTQyxNQUFNLElBQUk7WUFDckIsT0FBT0QsU0FBU0UsR0FBRztRQUNyQjtRQUVBLDhEQUE4RDtRQUM5RCxNQUFNQyxrQkFBa0JuQixzREFBR0EsQ0FBQ0sseUNBQUVBLEVBQUUsR0FBTyxPQUFKUyxLQUFJO1FBQ3ZDLE1BQU1NLGdCQUFnQixNQUFNbkIsc0RBQUdBLENBQUNrQjtRQUVoQyxJQUFJQyxjQUFjSCxNQUFNLElBQUk7WUFDMUIsT0FBT0csY0FBY0YsR0FBRztRQUMxQjtRQUVBLE9BQU87SUFDVCxFQUFFLE9BQU9SLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLCtCQUErQkE7UUFDN0MsT0FBTztJQUNUO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLGVBQWVXO0lBQ3BCLElBQUk7UUFDRixNQUFNYjtRQUNOLE1BQU1jLFVBQVV0QixzREFBR0EsQ0FBQ0sseUNBQUVBO1FBQ3RCLE1BQU1XLFdBQVcsTUFBTWYsc0RBQUdBLENBQUNxQjtRQUUzQixJQUFJLENBQUNOLFNBQVNDLE1BQU0sSUFBSTtZQUN0QixPQUFPLEVBQUU7UUFDWDtRQUVBLE1BQU1NLFVBQVVQLFNBQVNFLEdBQUc7UUFDNUIsTUFBTU0sYUFBcUIsRUFBRTtRQUU3QmIsUUFBUWMsR0FBRyxDQUFDLHNCQUFzQkY7UUFFbEMsOERBQThEO1FBQzlELElBQUssTUFBTVQsT0FBT1MsUUFBUztZQUN6QixJQUFJQSxPQUFPLENBQUNULElBQUksSUFBSSxPQUFPUyxPQUFPLENBQUNULElBQUksS0FBSyxZQUFZUyxPQUFPLENBQUNULElBQUksQ0FBQ1ksUUFBUSxFQUFFO2dCQUM3RSxNQUFNQyxjQUFjSixPQUFPLENBQUNULElBQUk7Z0JBQ2hDSCxRQUFRYyxHQUFHLENBQUMsbUJBQXVCLE9BQUpYLEtBQUksTUFBSWE7Z0JBRXZDLGtEQUFrRDtnQkFDbEQsTUFBTUMsV0FBVztvQkFBRSxHQUFHRCxXQUFXO2dCQUFDO2dCQUNsQ0MsU0FBU2QsR0FBRyxHQUFHQSxLQUFLLG9CQUFvQjtnQkFFeEMsZ0RBQWdEO2dCQUNoRGMsU0FBU0MsYUFBYSxHQUFHRCxTQUFTQyxhQUFhLElBQUk7Z0JBQ25ERCxTQUFTRSxvQkFBb0IsR0FBR0YsU0FBU0Usb0JBQW9CLElBQUk7Z0JBRWpFLGtFQUFrRTtnQkFDbEUsSUFBSUgsWUFBWUksT0FBTyxJQUFJLE9BQU9KLFlBQVlJLE9BQU8sS0FBSyxVQUFVO29CQUNsRXBCLFFBQVFjLEdBQUcsQ0FBQywrQkFBbUMsT0FBSlgsS0FBSSxNQUFJYSxZQUFZSSxPQUFPO29CQUN0RUgsU0FBU0csT0FBTyxHQUFHSixZQUFZSSxPQUFPO2dCQUN4QyxPQUFPO29CQUNMcEIsUUFBUWMsR0FBRyxDQUFDLGtDQUFzQyxPQUFKWCxLQUFJO29CQUNsREgsUUFBUWMsR0FBRyxDQUFFLGdDQUErQk8sT0FBT0MsSUFBSSxDQUFDTjtvQkFFeEQsc0RBQXNEO29CQUN0REMsU0FBU0csT0FBTyxHQUFHO3dCQUNqQkcsZ0JBQWdCO3dCQUNoQkMsbUJBQW1CO3dCQUNuQkMsU0FBUzt3QkFDVEMsUUFBUTtvQkFDVjtnQkFDRjtnQkFFQTFCLFFBQVFjLEdBQUcsQ0FBQyxpQ0FBcUMsT0FBSlgsS0FBSSxNQUFJYztnQkFDckRKLFdBQVdjLElBQUksQ0FBQ1Y7WUFDbEIsT0FBTztnQkFDTGpCLFFBQVFjLEdBQUcsQ0FBQyxrQ0FBc0MsT0FBSlgsS0FBSSxNQUFJUyxPQUFPLENBQUNULElBQUk7WUFDcEU7UUFDRjtRQUVBLGtDQUFrQztRQUNsQ1UsV0FBV2UsSUFBSSxDQUFDLENBQUNDLEdBQUdDLElBQU1ELEVBQUVFLFVBQVUsR0FBR0QsRUFBRUMsVUFBVTtRQUVyRCxPQUFPbEI7SUFDVCxFQUFFLE9BQU9kLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHdCQUF3QkE7UUFDdEMsT0FBTyxFQUFFO0lBQ1g7QUFDRjtBQUVBOztDQUVDLEdBQ00sZUFBZWlDLG9CQUFvQjdCLEdBQVcsRUFBRWUsYUFBcUIsRUFBRWUsT0FBZ0I7SUFDNUYsSUFBSTtRQUNGLE1BQU1wQztRQUNOLE1BQU1xQyxVQUFVN0Msc0RBQUdBLENBQUNLLHlDQUFFQSxFQUFFUztRQUN4QixNQUFNRSxXQUFXLE1BQU1mLHNEQUFHQSxDQUFDNEM7UUFFM0IsSUFBSSxDQUFDN0IsU0FBU0MsTUFBTSxJQUFJO1lBQ3RCLE1BQU0sSUFBSUwsTUFBTTtRQUNsQjtRQUVBLHdDQUF3QztRQUN4QyxNQUFNa0MsYUFBa0I7WUFDdEJqQixlQUFlQTtRQUNqQjtRQUVBLElBQUllLFlBQVlHLFdBQVc7WUFDekJELFdBQVdoQixvQkFBb0IsR0FBR2M7UUFDcEM7UUFFQSxNQUFNMUMseURBQU1BLENBQUMyQyxTQUFTQztRQUV0QixPQUFPO0lBQ1QsRUFBRSxPQUFPcEMsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsa0NBQWtDQTtRQUNoRCxNQUFNQTtJQUNSO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLFNBQVNzQyxpQkFBaUJDLFFBQWlDO0lBQ2hFLElBQUk7UUFDRixNQUFNM0IsVUFBVXRCLHNEQUFHQSxDQUFDSyx5Q0FBRUE7UUFFdEJNLFFBQVFjLEdBQUcsQ0FBQztRQUVaLE1BQU15QixjQUFjL0MsMERBQU9BLENBQUNtQixTQUMxQixDQUFDTjtZQUNDTCxRQUFRYyxHQUFHLENBQUM7WUFFWixJQUFJLENBQUNULFNBQVNDLE1BQU0sSUFBSTtnQkFDdEJOLFFBQVFjLEdBQUcsQ0FBQztnQkFDWndCLFNBQVMsRUFBRTtnQkFDWDtZQUNGO1lBRUEsTUFBTTFCLFVBQVVQLFNBQVNFLEdBQUc7WUFDNUIsTUFBTU0sYUFBcUIsRUFBRTtZQUU3Qiw4REFBOEQ7WUFDOUQsSUFBSyxNQUFNVixPQUFPUyxRQUFTO2dCQUN6QixJQUFJQSxPQUFPLENBQUNULElBQUksSUFBSSxPQUFPUyxPQUFPLENBQUNULElBQUksS0FBSyxZQUFZUyxPQUFPLENBQUNULElBQUksQ0FBQ1ksUUFBUSxFQUFFO29CQUM3RSxNQUFNQyxjQUFjSixPQUFPLENBQUNULElBQUk7b0JBQ2hDSCxRQUFRYyxHQUFHLENBQUMsOEJBQWtDLE9BQUpYLEtBQUksTUFBSWE7b0JBRWxELGtEQUFrRDtvQkFDbEQsTUFBTUMsV0FBVzt3QkFBRSxHQUFHRCxXQUFXO29CQUFDO29CQUNsQ0MsU0FBU2QsR0FBRyxHQUFHQSxLQUFLLG9CQUFvQjtvQkFFeEMsZ0RBQWdEO29CQUNoRGMsU0FBU0MsYUFBYSxHQUFHRCxTQUFTQyxhQUFhLElBQUk7b0JBQ25ERCxTQUFTRSxvQkFBb0IsR0FBR0YsU0FBU0Usb0JBQW9CLElBQUk7b0JBRWpFLHdEQUF3RDtvQkFDeEQsSUFBSUgsWUFBWUksT0FBTyxJQUFJLE9BQU9KLFlBQVlJLE9BQU8sS0FBSyxVQUFVO3dCQUNsRXBCLFFBQVFjLEdBQUcsQ0FBQywwQ0FBOEMsT0FBSlgsS0FBSSxNQUFJYSxZQUFZSSxPQUFPO3dCQUNqRkgsU0FBU0csT0FBTyxHQUFHSixZQUFZSSxPQUFPO29CQUN4QyxPQUFPO3dCQUNMcEIsUUFBUWMsR0FBRyxDQUFDLDZDQUFpRCxPQUFKWDt3QkFDekRILFFBQVFjLEdBQUcsQ0FBRSwyQ0FBMENPLE9BQU9DLElBQUksQ0FBQ047d0JBRW5FLHNEQUFzRDt3QkFDdERDLFNBQVNHLE9BQU8sR0FBRzs0QkFDakJHLGdCQUFnQjs0QkFDaEJDLG1CQUFtQjs0QkFDbkJDLFNBQVM7NEJBQ1RDLFFBQVE7d0JBQ1Y7b0JBQ0Y7b0JBRUExQixRQUFRYyxHQUFHLENBQUMsNENBQWdELE9BQUpYLEtBQUksTUFBSWM7b0JBQ2hFSixXQUFXYyxJQUFJLENBQUNWO2dCQUNsQixPQUFPO29CQUNMakIsUUFBUWMsR0FBRyxDQUFDLDZDQUFpRCxPQUFKWCxLQUFJLE1BQUlTLE9BQU8sQ0FBQ1QsSUFBSTtnQkFDL0U7WUFDRjtZQUVBSCxRQUFRYyxHQUFHLENBQUMsZUFBZUQ7WUFFM0Isa0NBQWtDO1lBQ2xDQSxXQUFXZSxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTUQsRUFBRUUsVUFBVSxHQUFHRCxFQUFFQyxVQUFVO1lBRXJETyxTQUFTekI7UUFDWCxHQUNBLENBQUNkO1lBQ0NDLFFBQVFELEtBQUssQ0FBQyxxQ0FBcUNBO1lBQ25EdUMsU0FBUyxFQUFFO1FBQ2I7UUFHRiw4QkFBOEI7UUFDOUIsT0FBTztZQUNMdEMsUUFBUWMsR0FBRyxDQUFDO1lBQ1pyQixzREFBR0EsQ0FBQ2tCLFNBQVMsU0FBUzRCO1FBQ3hCO0lBQ0YsRUFBRSxPQUFPeEMsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsZ0RBQWdEQTtRQUM5RCxPQUFPLEtBQU87SUFDaEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9saWIvZmlyZXN0b3JlLnRzP2I0NmUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gRmlyZWJhc2UgUmVhbHRpbWUgRGF0YWJhc2Ugb3BlcmF0aW9ucyBmb3IgQVIgVHJlYXN1cmUgSHVudCBWb2x1bnRlZXIgUGFnZVxuXG5pbXBvcnQge1xuICByZWYsXG4gIGdldCxcbiAgdXBkYXRlLFxuICBvblZhbHVlLFxuICBvZmZcbn0gZnJvbSAnZmlyZWJhc2UvZGF0YWJhc2UnO1xuaW1wb3J0IHsgZGIsIGF1dGggfSBmcm9tICcuL2ZpcmViYXNlJztcbmltcG9ydCB7IHNpZ25JbkFub255bW91c2x5IH0gZnJvbSAnZmlyZWJhc2UvYXV0aCc7XG5cbi8vIERlZmluZSB0aGUgU2Vzc2lvbiBpbnRlcmZhY2UgZm9yIHRlYW0gcHJvZ3Jlc3NcbmV4cG9ydCBpbnRlcmZhY2UgU2Vzc2lvbiB7XG4gIC8vIEFjdHVhbCBmaWVsZCBuYW1lcyBmcm9tIHlvdXIgRmlyZWJhc2Ugc3RydWN0dXJlXG4gIGNsdWVzQ29tcGxldGVkPzogbnVtYmVyO1xuICBjdXJyZW50Q2x1ZU51bWJlcj86IG51bWJlcjtcbiAgc3RhcnRlZD86IGJvb2xlYW47XG4gIFxuICAvLyBMZWdhY3kvYWx0ZXJuYXRpdmUgZmllbGQgbmFtZXMgZm9yIGNvbXBhdGliaWxpdHlcbiAgY3VycmVudENsdWU/OiBudW1iZXI7XG4gIGNsdWVzU29sdmVkPzogbnVtYmVyO1xuICB0b3RhbENsdWVzPzogbnVtYmVyO1xuICB0aW1lU3RhcnRlZD86IG51bWJlcjtcbiAgbGFzdEFjdGl2aXR5PzogbnVtYmVyO1xuICBzdGF0dXM/OiBzdHJpbmc7XG4gIHByb2dyZXNzTWV0cmljcz86IHtcbiAgICBba2V5OiBzdHJpbmddOiBhbnk7XG4gIH07XG4gIGN1cnJlbnRMZXZlbD86IG51bWJlcjtcbiAgZ2FtZVN0YXJ0ZWQ/OiBib29sZWFuO1xuICBpc0FjdGl2ZT86IGJvb2xlYW47XG4gIGxhc3RDbHVlVGltZT86IG51bWJlcjtcbiAgW2tleTogc3RyaW5nXTogYW55OyAvLyBBbGxvdyBmb3IgYW55IGFkZGl0aW9uYWwgZmllbGRzXG59XG5cbi8vIERlZmluZSB0aGUgVGVhbSBpbnRlcmZhY2VcbmV4cG9ydCBpbnRlcmZhY2UgVGVhbSB7XG4gIHVpZDogc3RyaW5nO1xuICB0ZWFtTnVtYmVyOiBudW1iZXI7XG4gIHRlYW1OYW1lOiBzdHJpbmc7XG4gIHBsYXllcjE6IHN0cmluZztcbiAgcGxheWVyMjogc3RyaW5nO1xuICBlbWFpbDogc3RyaW5nO1xuICBwaG9uZU51bWJlcjogc3RyaW5nO1xuICBzY29yZTogbnVtYmVyO1xuICBwaHlzaWNhbFNjb3JlPzogbnVtYmVyO1xuICBwaHlzaWNhbFNjb3JlQ29tbWVudD86IHN0cmluZzsgLy8gQ29tbWVudCBmaWVsZCBmb3IgcGh5c2ljYWwgc2NvcmVcbiAgY3JlYXRlZEF0OiBudW1iZXI7XG4gIHNlc3Npb24/OiBTZXNzaW9uOyAvLyBTZXNzaW9uIGRhdGEgZm9yIHByb2dyZXNzIHRyYWNraW5nXG59XG5cbi8qKlxuICogRW5zdXJlIHVzZXIgaXMgYXV0aGVudGljYXRlZCBiZWZvcmUgZGF0YWJhc2Ugb3BlcmF0aW9uc1xuICovXG5hc3luYyBmdW5jdGlvbiBlbnN1cmVBdXRoKCk6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoIWF1dGguY3VycmVudFVzZXIpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgc2lnbkluQW5vbnltb3VzbHkoYXV0aCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBhdXRoZW50aWNhdGUgYW5vbnltb3VzbHk6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBdXRoZW50aWNhdGlvbiByZXF1aXJlZCcpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEdldCBzZXNzaW9uIGRhdGEgZm9yIGEgdGVhbVxuICovXG5hc3luYyBmdW5jdGlvbiBnZXRUZWFtU2Vzc2lvbih1aWQ6IHN0cmluZyk6IFByb21pc2U8U2Vzc2lvbiB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICAvLyBUcnkgbG93ZXJjYXNlICdzZXNzaW9uJyBmaXJzdCAobWF0Y2hlcyBtYWluIGNvZGUpXG4gICAgY29uc3Qgc2Vzc2lvblJlZiA9IHJlZihkYiwgYCR7dWlkfS9zZXNzaW9uYCk7XG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXQoc2Vzc2lvblJlZik7XG4gICAgXG4gICAgaWYgKHNuYXBzaG90LmV4aXN0cygpKSB7XG4gICAgICByZXR1cm4gc25hcHNob3QudmFsKCkgYXMgU2Vzc2lvbjtcbiAgICB9XG4gICAgXG4gICAgLy8gRmFsbGJhY2sgdG8gdXBwZXJjYXNlICdTZXNzaW9uJyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbiAgICBjb25zdCBzZXNzaW9uUmVmVXBwZXIgPSByZWYoZGIsIGAke3VpZH0vU2Vzc2lvbmApO1xuICAgIGNvbnN0IHNuYXBzaG90VXBwZXIgPSBhd2FpdCBnZXQoc2Vzc2lvblJlZlVwcGVyKTtcbiAgICBcbiAgICBpZiAoc25hcHNob3RVcHBlci5leGlzdHMoKSkge1xuICAgICAgcmV0dXJuIHNuYXBzaG90VXBwZXIudmFsKCkgYXMgU2Vzc2lvbjtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIG51bGw7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB0ZWFtIHNlc3Npb246JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogR2V0IGFsbCB0ZWFtcyBmb3IgdGhlIHZvbHVudGVlciBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbFRlYW1zKCk6IFByb21pc2U8VGVhbVtdPiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgZW5zdXJlQXV0aCgpO1xuICAgIGNvbnN0IHJvb3RSZWYgPSByZWYoZGIpO1xuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0KHJvb3RSZWYpO1xuICAgIFxuICAgIGlmICghc25hcHNob3QuZXhpc3RzKCkpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBhbGxEYXRhID0gc25hcHNob3QudmFsKCk7XG4gICAgY29uc3QgdGVhbXNBcnJheTogVGVhbVtdID0gW107XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1JhdyBGaXJlYmFzZSBkYXRhOicsIGFsbERhdGEpO1xuICAgIFxuICAgIC8vIEZpbHRlciBvbmx5IHZhbGlkIHRlYW0gbm9kZXMgKHRob3NlIHdpdGggdGVhbU5hbWUgcHJvcGVydHkpXG4gICAgZm9yIChjb25zdCB1aWQgaW4gYWxsRGF0YSkge1xuICAgICAgaWYgKGFsbERhdGFbdWlkXSAmJiB0eXBlb2YgYWxsRGF0YVt1aWRdID09PSAnb2JqZWN0JyAmJiBhbGxEYXRhW3VpZF0udGVhbU5hbWUpIHtcbiAgICAgICAgY29uc3QgcmF3VGVhbURhdGEgPSBhbGxEYXRhW3VpZF07XG4gICAgICAgIGNvbnNvbGUubG9nKGBQcm9jZXNzaW5nIHRlYW0gJHt1aWR9OmAsIHJhd1RlYW1EYXRhKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSB0ZWFtIGRhdGEgd2l0aG91dCB0aGUgU2Vzc2lvbiBub2RlIGZpcnN0XG4gICAgICAgIGNvbnN0IHRlYW1EYXRhID0geyAuLi5yYXdUZWFtRGF0YSB9IGFzIFRlYW07XG4gICAgICAgIHRlYW1EYXRhLnVpZCA9IHVpZDsgLy8gRW5zdXJlIFVJRCBpcyBzZXRcbiAgICAgICAgXG4gICAgICAgIC8vIEVuc3VyZSBwaHlzaWNhbFNjb3JlIGFuZCBjb21tZW50IGFyZSBpbmNsdWRlZFxuICAgICAgICB0ZWFtRGF0YS5waHlzaWNhbFNjb3JlID0gdGVhbURhdGEucGh5c2ljYWxTY29yZSB8fCAwO1xuICAgICAgICB0ZWFtRGF0YS5waHlzaWNhbFNjb3JlQ29tbWVudCA9IHRlYW1EYXRhLnBoeXNpY2FsU2NvcmVDb21tZW50IHx8ICcnO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgaWYgc2Vzc2lvbiBkYXRhIGV4aXN0cyBhcyBhIG5lc3RlZCBvYmplY3QgKGxvd2VyY2FzZSAncycpXG4gICAgICAgIGlmIChyYXdUZWFtRGF0YS5zZXNzaW9uICYmIHR5cGVvZiByYXdUZWFtRGF0YS5zZXNzaW9uID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBGb3VuZCBzZXNzaW9uIGRhdGEgZm9yIHRlYW0gJHt1aWR9OmAsIHJhd1RlYW1EYXRhLnNlc3Npb24pO1xuICAgICAgICAgIHRlYW1EYXRhLnNlc3Npb24gPSByYXdUZWFtRGF0YS5zZXNzaW9uIGFzIFNlc3Npb247XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYE5vIHNlc3Npb24gZGF0YSBmb3VuZCBmb3IgdGVhbSAke3VpZH0sIGNoZWNraW5nIGZvciBhbHRlcm5hdGl2ZSBzZXNzaW9uIGRhdGEuLi5gKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgQXZhaWxhYmxlIGtleXMgaW4gdGVhbSBkYXRhOmAsIE9iamVjdC5rZXlzKHJhd1RlYW1EYXRhKSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRGVmYXVsdCBzZXNzaW9uIGRhdGEgZm9yIHRlYW1zIHRoYXQgaGF2ZW4ndCBzdGFydGVkXG4gICAgICAgICAgdGVhbURhdGEuc2Vzc2lvbiA9IHtcbiAgICAgICAgICAgIGNsdWVzQ29tcGxldGVkOiAwLFxuICAgICAgICAgICAgY3VycmVudENsdWVOdW1iZXI6IDAsXG4gICAgICAgICAgICBzdGFydGVkOiBmYWxzZSxcbiAgICAgICAgICAgIHN0YXR1czogJ25vdF9zdGFydGVkJ1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGBGaW5hbCBwcm9jZXNzZWQgdGVhbSBkYXRhIGZvciAke3VpZH06YCwgdGVhbURhdGEpO1xuICAgICAgICB0ZWFtc0FycmF5LnB1c2godGVhbURhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coYFNraXBwaW5nIGludmFsaWQgdGVhbSBkYXRhIGZvciAke3VpZH06YCwgYWxsRGF0YVt1aWRdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU29ydCBieSB0ZWFtIG51bWJlciAoYXNjZW5kaW5nKVxuICAgIHRlYW1zQXJyYXkuc29ydCgoYSwgYikgPT4gYS50ZWFtTnVtYmVyIC0gYi50ZWFtTnVtYmVyKTtcbiAgICBcbiAgICByZXR1cm4gdGVhbXNBcnJheTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHRlYW1zOicsIGVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbn1cblxuLyoqXG4gKiBVcGRhdGUgYSB0ZWFtJ3MgcGh5c2ljYWwgc2NvcmUgd2l0aCBjb21tZW50XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVQaHlzaWNhbFNjb3JlKHVpZDogc3RyaW5nLCBwaHlzaWNhbFNjb3JlOiBudW1iZXIsIGNvbW1lbnQ/OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBlbnN1cmVBdXRoKCk7XG4gICAgY29uc3QgdGVhbVJlZiA9IHJlZihkYiwgdWlkKTtcbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldCh0ZWFtUmVmKTtcbiAgICBcbiAgICBpZiAoIXNuYXBzaG90LmV4aXN0cygpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RlYW0gbm90IGZvdW5kIHdpdGggdGhlIHByb3ZpZGVkIFVJRCcpO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB0aGUgcGh5c2ljYWwgc2NvcmUgYW5kIGNvbW1lbnRcbiAgICBjb25zdCB1cGRhdGVEYXRhOiBhbnkgPSB7XG4gICAgICBwaHlzaWNhbFNjb3JlOiBwaHlzaWNhbFNjb3JlXG4gICAgfTtcbiAgICBcbiAgICBpZiAoY29tbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB1cGRhdGVEYXRhLnBoeXNpY2FsU2NvcmVDb21tZW50ID0gY29tbWVudDtcbiAgICB9XG5cbiAgICBhd2FpdCB1cGRhdGUodGVhbVJlZiwgdXBkYXRlRGF0YSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBwaHlzaWNhbCBzY29yZTonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiBTZXQgdXAgcmVhbC10aW1lIGxpc3RlbmVyIGZvciB0ZWFtIHVwZGF0ZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN1YnNjcmliZVRvVGVhbXMoY2FsbGJhY2s6ICh0ZWFtczogVGVhbVtdKSA9PiB2b2lkKTogKCkgPT4gdm9pZCB7XG4gIHRyeSB7XG4gICAgY29uc3Qgcm9vdFJlZiA9IHJlZihkYik7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1NldHRpbmcgdXAgUmVhbHRpbWUgRGF0YWJhc2UgbGlzdGVuZXIgZm9yIHRlYW1zLi4uJyk7XG4gICAgXG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSBvblZhbHVlKHJvb3RSZWYsIFxuICAgICAgKHNuYXBzaG90KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdSZWFsdGltZSBEYXRhYmFzZSBzbmFwc2hvdCByZWNlaXZlZCcpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFzbmFwc2hvdC5leGlzdHMoKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBkYXRhIGZvdW5kJyk7XG4gICAgICAgICAgY2FsbGJhY2soW10pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFsbERhdGEgPSBzbmFwc2hvdC52YWwoKTtcbiAgICAgICAgY29uc3QgdGVhbXNBcnJheTogVGVhbVtdID0gW107XG4gICAgICAgIFxuICAgICAgICAvLyBGaWx0ZXIgb25seSB2YWxpZCB0ZWFtIG5vZGVzICh0aG9zZSB3aXRoIHRlYW1OYW1lIHByb3BlcnR5KVxuICAgICAgICBmb3IgKGNvbnN0IHVpZCBpbiBhbGxEYXRhKSB7XG4gICAgICAgICAgaWYgKGFsbERhdGFbdWlkXSAmJiB0eXBlb2YgYWxsRGF0YVt1aWRdID09PSAnb2JqZWN0JyAmJiBhbGxEYXRhW3VpZF0udGVhbU5hbWUpIHtcbiAgICAgICAgICAgIGNvbnN0IHJhd1RlYW1EYXRhID0gYWxsRGF0YVt1aWRdO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFJlYWwtdGltZTogUHJvY2Vzc2luZyB0ZWFtICR7dWlkfTpgLCByYXdUZWFtRGF0YSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0ZWFtIGRhdGEgd2l0aG91dCB0aGUgU2Vzc2lvbiBub2RlIGZpcnN0XG4gICAgICAgICAgICBjb25zdCB0ZWFtRGF0YSA9IHsgLi4ucmF3VGVhbURhdGEgfSBhcyBUZWFtO1xuICAgICAgICAgICAgdGVhbURhdGEudWlkID0gdWlkOyAvLyBFbnN1cmUgVUlEIGlzIHNldFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBFbnN1cmUgcGh5c2ljYWxTY29yZSBhbmQgY29tbWVudCBhcmUgaW5jbHVkZWRcbiAgICAgICAgICAgIHRlYW1EYXRhLnBoeXNpY2FsU2NvcmUgPSB0ZWFtRGF0YS5waHlzaWNhbFNjb3JlIHx8IDA7XG4gICAgICAgICAgICB0ZWFtRGF0YS5waHlzaWNhbFNjb3JlQ29tbWVudCA9IHRlYW1EYXRhLnBoeXNpY2FsU2NvcmVDb21tZW50IHx8ICcnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBIYW5kbGUgc2Vzc2lvbiBkYXRhIGZyb20gdGhlIHNuYXBzaG90IChsb3dlcmNhc2UgJ3MnKVxuICAgICAgICAgICAgaWYgKHJhd1RlYW1EYXRhLnNlc3Npb24gJiYgdHlwZW9mIHJhd1RlYW1EYXRhLnNlc3Npb24gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBSZWFsLXRpbWU6IEZvdW5kIHNlc3Npb24gZGF0YSBmb3IgdGVhbSAke3VpZH06YCwgcmF3VGVhbURhdGEuc2Vzc2lvbik7XG4gICAgICAgICAgICAgIHRlYW1EYXRhLnNlc3Npb24gPSByYXdUZWFtRGF0YS5zZXNzaW9uIGFzIFNlc3Npb247XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgUmVhbC10aW1lOiBObyBzZXNzaW9uIGRhdGEgZm91bmQgZm9yIHRlYW0gJHt1aWR9YCk7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBSZWFsLXRpbWU6IEF2YWlsYWJsZSBrZXlzIGluIHRlYW0gZGF0YTpgLCBPYmplY3Qua2V5cyhyYXdUZWFtRGF0YSkpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRGVmYXVsdCBzZXNzaW9uIGRhdGEgZm9yIHRlYW1zIHRoYXQgaGF2ZW4ndCBzdGFydGVkXG4gICAgICAgICAgICAgIHRlYW1EYXRhLnNlc3Npb24gPSB7XG4gICAgICAgICAgICAgICAgY2x1ZXNDb21wbGV0ZWQ6IDAsXG4gICAgICAgICAgICAgICAgY3VycmVudENsdWVOdW1iZXI6IDAsXG4gICAgICAgICAgICAgICAgc3RhcnRlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnbm90X3N0YXJ0ZWQnXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBSZWFsLXRpbWU6IEZpbmFsIHByb2Nlc3NlZCB0ZWFtIGRhdGEgZm9yICR7dWlkfTpgLCB0ZWFtRGF0YSk7XG4gICAgICAgICAgICB0ZWFtc0FycmF5LnB1c2godGVhbURhdGEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgUmVhbC10aW1lOiBTa2lwcGluZyBpbnZhbGlkIHRlYW0gZGF0YSBmb3IgJHt1aWR9OmAsIGFsbERhdGFbdWlkXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZygnVGVhbXMgZGF0YTonLCB0ZWFtc0FycmF5KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNvcnQgYnkgdGVhbSBudW1iZXIgKGFzY2VuZGluZylcbiAgICAgICAgdGVhbXNBcnJheS5zb3J0KChhLCBiKSA9PiBhLnRlYW1OdW1iZXIgLSBiLnRlYW1OdW1iZXIpO1xuICAgICAgICBcbiAgICAgICAgY2FsbGJhY2sodGVhbXNBcnJheSk7XG4gICAgICB9LFxuICAgICAgKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1JlYWx0aW1lIERhdGFiYXNlIGxpc3RlbmVyIGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgY2FsbGJhY2soW10pO1xuICAgICAgfVxuICAgICk7XG5cbiAgICAvLyBSZXR1cm4gdW5zdWJzY3JpYmUgZnVuY3Rpb25cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1Vuc3Vic2NyaWJpbmcgZnJvbSBSZWFsdGltZSBEYXRhYmFzZSBsaXN0ZW5lcicpO1xuICAgICAgb2ZmKHJvb3RSZWYsICd2YWx1ZScsIHVuc3Vic2NyaWJlKTtcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNldHRpbmcgdXAgUmVhbHRpbWUgRGF0YWJhc2UgbGlzdGVuZXI6JywgZXJyb3IpO1xuICAgIHJldHVybiAoKSA9PiB7fTtcbiAgfVxufSJdLCJuYW1lcyI6WyJyZWYiLCJnZXQiLCJ1cGRhdGUiLCJvblZhbHVlIiwib2ZmIiwiZGIiLCJhdXRoIiwic2lnbkluQW5vbnltb3VzbHkiLCJlbnN1cmVBdXRoIiwiY3VycmVudFVzZXIiLCJlcnJvciIsImNvbnNvbGUiLCJFcnJvciIsImdldFRlYW1TZXNzaW9uIiwidWlkIiwic2Vzc2lvblJlZiIsInNuYXBzaG90IiwiZXhpc3RzIiwidmFsIiwic2Vzc2lvblJlZlVwcGVyIiwic25hcHNob3RVcHBlciIsImdldEFsbFRlYW1zIiwicm9vdFJlZiIsImFsbERhdGEiLCJ0ZWFtc0FycmF5IiwibG9nIiwidGVhbU5hbWUiLCJyYXdUZWFtRGF0YSIsInRlYW1EYXRhIiwicGh5c2ljYWxTY29yZSIsInBoeXNpY2FsU2NvcmVDb21tZW50Iiwic2Vzc2lvbiIsIk9iamVjdCIsImtleXMiLCJjbHVlc0NvbXBsZXRlZCIsImN1cnJlbnRDbHVlTnVtYmVyIiwic3RhcnRlZCIsInN0YXR1cyIsInB1c2giLCJzb3J0IiwiYSIsImIiLCJ0ZWFtTnVtYmVyIiwidXBkYXRlUGh5c2ljYWxTY29yZSIsImNvbW1lbnQiLCJ0ZWFtUmVmIiwidXBkYXRlRGF0YSIsInVuZGVmaW5lZCIsInN1YnNjcmliZVRvVGVhbXMiLCJjYWxsYmFjayIsInVuc3Vic2NyaWJlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/firestore.ts\n"));

/***/ })

});